{%- raw -%}
{% assign host_id = this.properties.module_field_12_4 | downcase %}
{% assign host = host_results.records.results | detect: id: host_id %}
{% assign host = host | add_hash_key: "Title", host.properties['module_field_6_1'] %}
{% assign host = host | add_hash_key: "Image", host.properties['module_field_6_4'] %}
{% assign host = host | add_hash_key: "Image Alt", host.properties['module_field_6_5'] %}

<article class="p-4 bg-white rounded-lg border border-gray-200 shadow-md dark:bg-gray-800 dark:border-gray-700">
  <a href="{{this.full_slug}}">
      <img class="mb-5 rounded-lg" src="{{this['List Image'] | asset_url}}" alt="{{this['List Image Alt']}}">
  </a>
  <div class="categories">
  {% for category in this['category_array'] %}
    <a href="{{events_list_page_url}}?category={{context.exports.categories.data[category].id}}" class="bg-primary-100 hover:bg-primary-200 text-primary-800 text-xs font-semibold px-2.5 py-0.5 mt-4 rounded dark:bg-primary-200 dark:text-primary-800 dark:hover:bg-primary-300 mr-2 mb-2">
      {{context.exports.categories.data[category].name  | replace: " ", "&nbsp;"}}
    </a>
  {% endfor %}
</div>
  <h2 class="my-2 text-2xl font-bold tracking-tight text-gray-900 dark:text-white">
      <a href="{{this.full_slug}}">{{this.properties.name}}</a>
  </h2>
  {% if this.properties['module_field_12_6'] != blank  %}
    <p class="mb-2 text-sm text-gray-500">
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="inline w-6 h-6 mr-2 mb-1">
        <path stroke-linecap="round" stroke-linejoin="round" d="M15 10.5a3 3 0 11-6 0 3 3 0 016 0z" />
        <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1115 0z" />
      </svg>
      <span>{{this.properties.module_field_12_6}}</span></p>
  {% endif %}
  <div class="mb-4 font-white text-gray-500 dark:text-gray-400">{{this['Description'] | split: "." | first | append: "." | html_safe}}</div>
  <div class="flex items-center space-x-4 mt-4">
      {% if host['Image'] != blank %}
        <img class="w-10 h-10 rounded-full" src="{{host['Image'] | asset_url}}" alt="{{host['Image Alt']}}">
      {% endif %}
      <div class="font-medium dark:text-white">
          {% if host.id != blank %}
            <div>{{host['Title']}}</div>
          {% endif %}
          <div class="text-sm font-normal text-gray-500 dark:text-gray-400">{{this['Event Start'] | date: '%d/%m/%y %H:%M'}} </div>
      </div>
  </div>
</article>
{%- endraw -%}